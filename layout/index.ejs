<% if (site.posts && site.posts.length > 0) { %>
    <% site.posts.sort('date', -1).each(function(post, i) { %>
        <div class="row mb-4 post-container">
            <div class="col-8 col-md-9 d-block ps-0 pe-3">
                <a href="<%= url_for(post.path) %>" class="text-decoration-none">
                    <h2 class="text-primary post-title text-dark">
                        <%= post.title %>
                    </h2>
                    <p class="text-secondary post-excerpt d-none d-md-block">
                        <%= post.excerpt || post.content.replace(/<[^>]*>/g, '').slice(0, 100) %>...
                    </p>
                    <!-- 手機版 post -->
                    <p class="text-secondary post-excerpt d-block d-md-none">
                        <%= post.excerpt || post.content.replace(/<[^>]*>/g, '').slice(0, 20) %>...
                    </p>
                    <p class="text-secondary post-date">
                        <%= new Date(post.date).toLocaleDateString('zh-TW', { year: 'numeric', month: 'long', day: 'numeric' }) %>
                    </p>
                </a>
            </div>
            <div class="col-4 col-md-3">
                <img src="<%= post.image || '/images/default-cover.jpg' %>" alt="<%= post.title %>" class="img-fluid rounded" style="width: 100%; height: auto; overflow: hidden; display: block; margin: 0 auto;">
            </div>
        </div>
    <% }); %>
<% } else { %>
    <p>No posts found.</p>
<% } %>

<%- partial('_partial/paginator', { page_info: page }) %>
